{
    "Meshes":
    {
        "fluid":
        {
            "DistanceToRange":
            {
                "wall1":
                {
                    "markers":["Top","Bottom","SideCylinder"],
                    "normalization":"min_max"
                },
                "wall2":
                {
                    "markers":"ParticleSurf",
                    "normalization":"min_max"
                }
            },
            "MeshAdaptation":[
                {
                    "metric":"min(mymetric_wall1,mymetric_wall2):mymetric_wall1:mymetric_wall2",
                    "events":{
                        "after_import":{}
                    }
                },
                {
		    "metric":"min(mymetric_velocity,min(mymetric_wall1,mymetric_wall2)):mymetric_wall1:mymetric_wall2:mymetric_velocity",
                    "required_markers":["ParticleSurf","Top","Bottom","SideCylinder","ParticleVolume"],
                    "events":{
                        "each_time_step":{
                            "frequency":5
                        }
                    }
                }]
        }
    },
    "Parameters":
    {
        "hfar":1,
        "hclose_wall1":"hfar/2:hfar",
        "hclose_wall2":"hfar/5:hfar",
        "d2r_bounded_wall1":"min(meshes_fluid_distanceToRange_wall1_normalized_min_max,0.2)/0.2:meshes_fluid_distanceToRange_wall1_normalized_min_max",
        "mymetric_wall1":"hclose_wall1+(hfar-hclose_wall1)*d2r_bounded_wall1:hclose_wall1:hfar:d2r_bounded_wall1",
        "d2r_bounded_wall2":"min(meshes_fluid_distanceToRange_wall2_normalized_min_max,0.2)/0.2:meshes_fluid_distanceToRange_wall2_normalized_min_max",
        "mymetric_wall2":"hclose_wall2+(hfar-hclose_wall2)*d2r_bounded_wall2:hclose_wall2:hfar:d2r_bounded_wall2",

	"u_magnitude_normalized":"min(30,fluid_U_magnitude)/30:fluid_U_magnitude",
        "u_magnitude_normalized_log":"(log(u_magnitude_normalized+0.01) - log(0.01))/(log(1+0.01)-log(0.01)):u_magnitude_normalized",
        "hclose_velocitymetric":"hfar/5:hfar",
        "mymetric_velocity":"hfar+(hclose_velocitymetric/3-hfar)*u_magnitude_normalized_log:hclose_velocitymetric:hfar:u_magnitude_normalized_log"
    },
    "AAPostProcess":
    {
        "fluid":
        {
            "Exports":
            {
                "expr":{
                    "d2r_wall2":"meshes_fluid_distanceToRange_wall2:meshes_fluid_distanceToRange_wall2",
                    "d2r_wall2_normalized_minmax":"meshes_fluid_distanceToRange_wall2_normalized_min_max:meshes_fluid_distanceToRange_wall2_normalized_min_max"
                }
            }
        }
    }
}
